<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Камень-ножницы-бумага</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <style>
        body{
            margin:0;
            padding:0;
            background-color: beige;
        }

        .choice-player-1, .choice-player-2{
            height: 200px;
            width: 200px;
            background-color: black;
            margin-left: auto;
            margin-right: auto;
        }
    </style>
</head>
<body>
    <!--
        Камень - серый
        Ножницы - оранжевые
        Бумага - белая
    -->
    <div class="col-8 mx-auto text-center mt-5">
        <h1 class="info">Игрок 1 ходит!</h1>
        <div class="row  py-5">
            <div class="col-6 bg-success py-5">
                <h1>Игрок 1</h1>
                <div class="choice-player-1">

                </div>
                <p>Камень (серый) - A</p>
                <p>Ножницы (оранжевый)- S</p>
                <p>Бумага (белый)- D</p>
            </div>
            <div class="col-6 bg-info py-5">
                <h1>Игрок 2</h1>
                <div class="choice-player-2">
                </div>
                <p>Камень (серый)- J</p>
                <p>Ножницы (оранжевый)- K</p>
                <p>Бумага (белый)- L</p>
            </div>
        </div>
    </div>
    <script>
        let info = document.querySelector('.info')
        let playerName = "first";
        let player1Status = null; 
        let player2Status = null; 
        let choice1 = document.querySelector('.choice-player-1')
        let choice2 = document.querySelector('.choice-player-2')
        document.addEventListener("keydown", function (event) {
            if(playerName=="first") {
                if(event.code=="KeyS"){
                    console.log("Игрок 1 нажимаю на S");
                    playerName = 'second';
                    info.innerHTML = 'Игрок 2 ходит !'
                    player1Status = 'ножницы';
                    console.log(player1Status)
                } 
                else if(event.code=="KeyD"){
                    console.log("Игрок 1 нажимаю на D");
                    playerName = 'second';
                    info.innerHTML = 'Игрок 2 ходит !'
                    player1Status = 'камень'
                    console.log(player1Status)
                } 
                else if(event.code=="KeyA"){
                    console.log("Игрок 1 нажимаю на A");
                    playerName = 'second';
                    info.innerHTML = 'Игрок 2 ходит !'
                    player1Status = 'бумага'
                    console.log(player1Status)
                } 
                else {                                 
                    console.log("не та буква");
                }	
    
            } else if(playerName=="second") {
                if(event.code=="KeyJ"){
                    console.log("Игрок 2 нажимаю на J");
                    playerName = "finish"
                    info.innerHTML = 'Конец.'
                    player2Status = 'ножницы'
                    console.log(player2Status)
                } 
                else if(event.code=="KeyK"){
                    console.log("Игрок 2 нажимаю на K");
                    playerName = "finish"
                    info.innerHTML = 'Конец.'
                    player2Status = 'камень'
                    console.log(player2Status)
                } 
                else if(event.code=="KeyL"){
                    console.log("Игрок 2 нажимаю на L");
                    playerName = "finish"
                    info.innerHTML = 'Конец.'
                    player2Status = 'бумага'
                    console.log(player2Status)
                } 
                else {                                 
                    console.log("не та буква");
                }
            }
    
    
            if(playerName=="finish"){
                console.log("конец игры");
                setTimeout(divReaction, 5)
                setTimeout(gameResult, 100)
            }
        })
        let divReaction = function() {
            if(player1Status == 'ножницы'){
                choice1.style.background = 'yellow'
            } else if(player1Status == 'камень'){
                choice1.style.background = 'red'
            } else if(player1Status == 'бумага'){
                choice1.style.background = 'white'
            } 
            if(player2Status == 'камень'){
                choice2.style.background = 'red'
            } else if(player2Status == 'ножницы'){
                choice2.style.background = 'yellow'
            } else if(player1Status == 'бумага'){
                choice2.style.background = 'white'
            }
        }
        let gameResult = function() {
            if(player1Status == 'ножницы' && player2Status == 'камень') {
                alert('player2 win')
            } else if(player1Status == 'ножницы' && player2Status == 'бумага') {
                alert('player1 win')
            }
            if(player2Status == 'ножницы' && player1Status == 'камень') {
                alert('player1 win')
            } else if(player2Status == 'ножницы' && player1Status == 'бумага') {
                alert('player2 win')
            }
            if(player1Status == 'камень' && player2Status == 'бумага') {
                alert('player2 win')
            } 
            if(player2Status == 'камень' && player1Status == 'бумага') {
                alert('player1 win')
            }
            if(player2Status == 'камень' && player1Status == 'камень') {
                alert('tie')
            } else if(player1Status == 'бумага' && player2Status == 'бумага'){
                alert('tie')
            } else if(player1Status == 'ножницы' && player2Status == 'ножницы'){
                alert('tie')
            }
        }
</script>  
</body>
</html>